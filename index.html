<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mastering Logic | Systems Architecture Interface</title>
    
    <link rel="stylesheet" href="/style.css">

    <style>
        /* DYNAMIC INTERFACE OVERLAYS */
        .system-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999;
            background: radial-gradient(circle at 50% 50%, transparent 0%, rgba(5, 5, 5, 0.2) 100%);
        }

        .scanning-line {
            width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--p-brand), transparent);
            position: absolute; top: -2px; animation: scan 8s linear infinite; opacity: 0.1;
        }

        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }

        /* GLOBAL ALERT BANNER */
        #system-alert-banner {
            display: none;
            background: var(--err-brand);
            color: white;
            text-align: center;
            padding: 12px;
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            font-weight: 900;
            position: sticky;
            top: 0;
            z-index: 1001;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* LIVE SYSTEM CONSOLE STYLING */
        #system-console {
            background: #050508;
            border: 1px solid var(--brd-subtle);
            border-radius: 12px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: #4aefaf;
            height: 200px;
            overflow-y: hidden;
            position: relative;
            margin-top: 60px;
        }

        .console-log {
            margin-bottom: 5px;
            opacity: 0.8;
            display: flex;
            gap: 15px;
        }

        .log-ts { color: var(--txt-low); }
        .log-tag { color: var(--p-brand); font-weight: 900; }

        /* Mobile Heuristic Styling */
        .mobile-node .hero-title {
            font-size: 3.2rem !important;
            letter-spacing: -2px !important;
        }

        .desktop-node .logic-grid {
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
        }

        .skeleton-loader {
            background: linear-gradient(90deg, #0a0a0f 25%, #151520 50%, #0a0a0f 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 20px;
            height: 400px;
            margin-bottom: 20px;
        }

        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="system-base">

    <div id="system-alert-banner">SYSTEM_ALERT: <span id="alert-text">NONE</span></div>

    <div class="system-overlay">
        <div class="scanning-line"></div>
    </div>

    <nav id="master-nav">
        <div class="nav-content">
            <a href="/" class="logo-main">MASTERING<span>LOGIC</span></a>
            
            <div class="nav-links pc-only-flex" style="display:flex; gap:35px; font-size:0.75rem; font-weight:900; letter-spacing:1px;">
                <a href="#projects" class="nav-item">SYSTEMS_REGISTRY</a>
                <a href="#console" class="nav-item">LIVE_LOGS</a>
                <a href="/admin" class="nav-item highlight" style="color:var(--p-brand);">ADMIN_CONSOLE</a>
            </div>
        </div>
    </nav>

    <div class="container">
        
        <header class="hero-section" style="margin-bottom: 120px; position:relative;">
            <div class="header-metadata">
                <span id="system-status-tag" class="status-pill">
                    <div class="status-dot"></div>
                    NODE_ACTIVE
                </span>
                <span id="device-info-tag" class="status-pill" style="margin-left:10px; color:var(--txt-low);">
                    SCANNING_DEVICE...
                </span>
            </div>

            <h1 class="hero-title" style="margin-top:30px;">
                Architecting<br>
                <span style="color:var(--p-brand);">Autonomous Logic.</span>
            </h1>
            
            <p class="hero-description" style="color:var(--txt-muted); max-width:700px; font-size:1.2rem; margin-top:35px; line-height:1.8;">
                Deploying high-frequency automation and predictive system architecture. 
                Focusing on the logical frameworks that drive the next generation of 
                infrastructure management.
            </p>

            <div class="stats-container desktop-row mt-60" style="gap:80px;">
                <div class="stat-block">
                    <h2 id="agg-users" class="stat-value" style="font-family:'JetBrains Mono'; color:var(--p-brand); margin:0; font-size:3rem;">0</h2>
                    <p class="stat-label" style="font-size:0.65rem; font-weight:900; color:var(--txt-low); letter-spacing:2px; text-transform:uppercase;">Global_Users</p>
                </div>
                <div class="stat-block">
                    <h2 id="agg-nodes" class="stat-value" style="font-family:'JetBrains Mono'; color:var(--p-brand); margin:0; font-size:3rem;">0</h2>
                    <p class="stat-label" style="font-size:0.65rem; font-weight:900; color:var(--txt-low); letter-spacing:2px; text-transform:uppercase;">Active_Guilds</p>
                </div>
                <div class="stat-block mobile-hide">
                    <h2 id="agg-latency" class="stat-value" style="font-family:'JetBrains Mono'; color:var(--s-brand); margin:0; font-size:3rem;">0ms</h2>
                    <p class="stat-label" style="font-size:0.65rem; font-weight:900; color:var(--txt-low); letter-spacing:2px; text-transform:uppercase;">System_Latency</p>
                </div>
            </div>
        </header>

        <section id="projects" class="view-section">
            <div class="section-header" style="display:flex; align-items:center; gap:25px; margin-bottom:70px;">
                <h2 class="section-title" style="margin:0; font-size:2.4rem;">Deployment <span style="color:var(--p-brand)">Registry</span></h2>
                <div class="accent-line" style="flex-grow:1; height:1px; background:var(--brd-subtle);"></div>
            </div>
            
            <div id="bot-mount-point" class="logic-grid">
                <div class="skeleton-loader"></div>
                <div class="skeleton-loader"></div>
                <div class="skeleton-loader"></div>
            </div>
        </section>

        <section id="console" class="view-section" style="margin-top:100px;">
            <div class="section-header" style="display:flex; align-items:center; gap:25px; margin-bottom:30px;">
                <h2 class="section-title" style="margin:0; font-size:1.2rem; color:var(--txt-low);">Kernel_<span style="color:var(--p-brand)">Events</span></h2>
                <div class="accent-line" style="flex-grow:1; height:1px; background:var(--brd-subtle);"></div>
            </div>
            <div id="system-console"></div>
        </section>

        <footer id="master-footer" style="margin-top:150px; padding:80px 0; border-top:1px solid var(--brd-subtle); text-align:center; position:relative;">
            <div class="footer-logo">
                <a href="#" class="logo-main" style="justify-content:center; margin-bottom:20px;">MASTERING<span>LOGIC</span></a>
            </div>
            <p class="footer-legal" style="font-family:'JetBrains Mono'; font-size:0.7rem; color:var(--txt-low); letter-spacing:2px; text-transform:uppercase;">
                Mainframe Architecture v6.0.4-D // Â© 2026
            </p>
        </footer>

    </div>

    <script type="module">
        /* --- MASTER OVERRIDE LISTENERS --- */
        if (localStorage.getItem('MAINTENANCE_MODE') === 'true') { window.location.href = "/redirect.html"; }
        
        const activeAlert = localStorage.getItem('SYSTEM_ALERT_TEXT');
        if (activeAlert) {
            document.getElementById('system-alert-banner').style.display = 'block';
            document.getElementById('alert-text').innerText = activeAlert;
        }

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const logicConfig = { projectId: "portfolio-a8de0", appId: "1:352813143804:web:9ab1d0f59f38d0b519e979" };
        const appNode = initializeApp(logicConfig);
        const dbInstance = getFirestore(appNode);
        const consoleNode = document.getElementById('system-console');

        const writeLog = (tag, message) => {
            const ts = new Date().toLocaleTimeString('en-GB', { hour12: false });
            const logEntry = document.createElement('div');
            logEntry.className = 'console-log';
            logEntry.innerHTML = `<span class="log-ts">[${ts}]</span><span class="log-tag">${tag}</span><span class="log-msg">${message}</span>`;
            consoleNode.prepend(logEntry);
            if(consoleNode.childNodes.length > 15) consoleNode.lastChild.remove();
        };

        const runSystemHeuristics = () => {
            writeLog("CORE", "Initializing hardware heuristic scan...");
            const userAgent = navigator.userAgent;
            const isMobile = /android|iphone|ipad/i.test(userAgent);
            document.body.classList.add(isMobile ? 'mobile-node' : 'desktop-node');
            document.getElementById('device-info-tag').innerText = isMobile ? "DEVICE: MOBILE_HANDSET" : "DEVICE: WORKSTATION_NODE";
            
            const latencyValue = Math.floor(Math.random() * (45 - 12 + 1) + 12);
            document.getElementById('agg-latency').innerText = `${latencyValue}ms`;
            writeLog("NETWORK", `Handshake complete. Latency: ${latencyValue}ms`);
        };

        const initializeSystemsStream = () => {
            const mount = document.getElementById('bot-mount-point');
            writeLog("FIREBASE", "Opening secure socket to 'bots' collection...");

            onSnapshot(collection(dbInstance, "bots"), (snapshot) => {
                mount.innerHTML = ""; 
                let u = 0; let n = 0;
                writeLog("SYNC", `Received payload: ${snapshot.size} system nodes.`);

                snapshot.forEach(doc => {
                    const sys = doc.data();
                    u += parseInt(sys.users || 0); n += parseInt(sys.servers || 0);
                    mount.innerHTML += `
                        <article class="card-frame" style="display:flex; flex-direction:column;">
                            <div class="card-header" style="display:flex; justify-content:space-between; margin-bottom:25px; align-items:center;">
                                <div class="status-pill" style="font-size:0.65rem; border:1px solid var(--brd-vibrant); padding:4px 12px; border-radius:100px;">
                                    <div class="status-dot"></div> MAIN_BRANCH
                                </div>
                                <span style="font-family:'JetBrains Mono'; font-size:0.8rem; color:var(--txt-low);">U_COUNT: ${parseInt(sys.users || 0).toLocaleString()}</span>
                            </div>
                            <img src="${sys.avatar}" style="filter: grayscale(0.2) contrast(1.1); margin-bottom:25px; border-radius:15px; width:100%;">
                            <h2 style="margin:0; font-size:1.8rem;">${sys.name}</h2>
                            <p style="color:var(--txt-muted); font-size:0.95rem; margin-top:20px; flex-grow:1;">${sys.desc}</p>
                            <a href="${sys.invite}" target="_blank" class="btn-execute mt-30" style="text-decoration:none; text-align:center; border:1px solid var(--p-brand); color:var(--p-brand); padding:15px; border-radius:10px; font-weight:900; font-size:0.7rem;">INITIALIZE_INTEGRATION</a>
                        </article>`;
                });
                document.getElementById('agg-users').innerText = u.toLocaleString();
                document.getElementById('agg-nodes').innerText = n.toLocaleString();
                writeLog("AGGREGATE", "Global metrics recalculated.");
            });
        };

        const bootSequence = () => {
            writeLog("BOOT", "System kernel starting...");
            runSystemHeuristics();
            setTimeout(() => { initializeSystemsStream(); writeLog("BOOT", "All logical threads active."); }, 800);
        };

        document.addEventListener('DOMContentLoaded', bootSequence);
    </script>
</body>
</html>
